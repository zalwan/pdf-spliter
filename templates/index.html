<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PDF Splitter</title>
    <link rel="icon" href="https://fav.farm/ðŸ‘Œ" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .loading {
          display: inline-block;
          width: 16px;
          height: 16px;
          border: 3px solid transparent;
          border-top: 3px solid white;
          border-radius: 50%;
          animation: spin 1s linear infinite;
      }

      @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
      }
    </style>
  </head>
  <body>
    <section class="flex min-h-screen flex-col items-center justify-center bg-gray-800 p-6">
      <div class="w-full max-w-2xl">
        <h1 class="text-center text-3xl font-bold text-white">Split PDF with Custom Name</h1>
        <div class="mt-6 flex w-full justify-center gap-4">
          <div class="flex items-center justify-center rounded bg-blue-100 p-4">
            <label for="pdf" class="flex h-52 w-64 cursor-pointer flex-col items-center justify-center rounded border-2 border-dashed border-gray-300 bg-white text-center text-sm font-semibold text-gray-500">
              <svg xmlns="http://www.w3.org/2000/svg" class="mb-2 w-11 fill-gray-500" viewBox="0 0 32 32">
                <path d="M23.75 11.044a7.99 7.99 0 0 0-15.5-.009A8 8 0 0 0 9 27h3a1 1 0 0 0 0-2H9a6 6 0 0 1-.035-12 1.038 1.038 0 0 0 1.1-.854 5.991 5.991 0 0 1 11.862 0A1.08 1.08 0 0 0 23 13a6 6 0 0 1 0 12h-3a1 1 0 0 0 0 2h3a8 8 0 0 0 .75-15.956z" />
                <path d="M20.293 19.707a1 1 0 0 0 1.414-1.414l-5-5a1 1 0 0 0-1.414 0l-5 5a1 1 0 0 0 1.414 1.414L15 16.414V29a1 1 0 0 0 2 0V16.414z" />
              </svg>
              <span id="fileName" class="mt-2 text-sm text-gray-700">Upload file</span>
              <input type="file" name="pdf" id="pdf" class="hidden" onchange="updateFileName()" required />
              <p class="mt-2 text-xs text-gray-400">Only PDF files are allowed.</p>
            </label>
          </div>
          <div class="w-full max-w-md flex-1">
            <form action="/split" method="POST" enctype="multipart/form-data" class="flex h-full flex-col">
              <div class="flex flex-1 flex-col rounded-lg border border-gray-200 bg-gray-50 dark:border-gray-600 dark:bg-gray-700">
                <div class="border-b border-gray-200 px-3 py-2 dark:border-gray-600">
                  <p class="text-center font-mono text-white">Enter names (one per line)</p>
                </div>
                <div class="flex-1 bg-white px-4 py-2 dark:bg-gray-800">
                  <textarea name="names" id="names" rows="4" class="h-full min-h-[200px] w-full border-0 bg-white text-sm text-gray-900 focus:ring-0 dark:bg-gray-800 dark:text-white dark:placeholder-gray-400" placeholder="Enter name page..." required></textarea>
                </div>
                <div class="border-t border-gray-200 px-3 py-2 dark:border-gray-600">
                  <button type="submit" id="generateBtn" class="w-full rounded-lg bg-blue-700 px-4 py-2.5 text-xs font-medium text-white hover:bg-blue-800 focus:ring-4 focus:ring-blue-200 dark:focus:ring-blue-900" onclick="showLoading()">Generate PDF</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>

    <script>
      function updateFileName() {
          const fileInput = document.getElementById('pdf');
          const fileName = document.getElementById('fileName');
          fileName.textContent = fileInput.files.length > 0 ? fileInput.files[0].name : 'Upload file';
      }

      function showLoading() {
          const button = document.getElementById('generateBtn');
          button.disabled = true; // Disable the button to prevent multiple clicks
          button.innerHTML = 'Loading <span class="loading"></span>';

          // Simulate a delay of 2 seconds
          setTimeout(() => {
              button.disabled = false; // Re-enable the button after 2 seconds
              button.innerHTML = 'Generate PDF'; // Reset the button text
          }, 2000);
      }
    </script>
  </body>
</html>
